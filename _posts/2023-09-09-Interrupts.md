---
title: "IRQ basic"
categories:
  - blog
tags:
  - Interrupts
  - operating system
---

# Linux 中断（IRQ/softirq）基础：原理及内核实现（2022）

----------

## 1 延迟中断简介（Softirq、Tasklet 和 Workqueues）

中断可能具有不同的重要特征，其中有**两个**：

- 中断处理程序**必须快速执行**
- 有时中断处理程序**必须执行大量工作**

要使这两个特征都有效几乎是不可能的。因此，以前中断的处理被分为两部分：

- 上半部分
- 下半区

过去，Linux 内核中有一种推迟中断处理的方法。它被称为：`the bottom half`处理器，但现在它已经不是实际的了。现在，这个术语仍然是一个通用名词，指的是组织中断延迟处理的所有不同方式。中断延迟处理表明，当系统将要运行时，中断的某些操作可能会推迟到稍后执行。负载较少。正如您所建议的，中断处理程序可以执行大量不允许的工作，因为它在禁用中断的上下文中执行。这就是为什么中断处理可以分为两个不同的部分。在第一部分中，中断的主处理程序只执行最少且最重要的工作。此后，它安排第二部分并完成其工作。当系统不太忙并且处理器的上下文允许处理中断时，

